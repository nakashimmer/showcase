<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>文字数カウント</title>
		<style>
			* {
				font-size: 20px;
				margin:0;
				padding:0;
			}

			#input {
				width:calc(100% - 3em - 2px);
				height: 5em;
				text-align: left;
				margin: 1em;
				padding:0.5em;
			}

			#output {
				color: red;
				margin:0.5em;
			}

			p{text-align: center;}
		</style>
	</head>
	<body>
		<p>
			<textarea id="input" placeholder="カウントしたいテキストをコピーペーストする。枠内で編集すると不正な値になるので注意。"></textarea>
		</p>
		<p>
			<button onclick="count();">カウントする</button>
			結果は:<span id="output">？</span>文字
		</p>
		<p id="cons"></p>
		<script>
			const input = document.getElementById("input");
			const output = document.getElementById("output");
			function count() {
				let text = input.value;
				text = text.replace(" ", "").replace("　", "");
				text = text.replace(/\u200B/g, "");
				
				text=text.replace("¥r", "").replace("\r", "");
				text=text.replace("¥n", "").replace("\n", "");
				text=text.replace("¥t", "").replace("\t", "");
				text = text.replace("¥l", "").replace("\l", "");
				
				output.innerHTML = text.trim().length+ "<br>[" + text.trim() + "]";
				console.log("["+text.trim()+"]");
			}
		</script>
	</body>
</html>